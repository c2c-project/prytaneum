"use strict";(self.webpackChunk_app_docs=self.webpackChunk_app_docs||[]).push([[733],{8840:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return u}});var a=n(9703);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),m=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=m(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=m(n),u=i,d=h["".concat(l,".").concat(u)]||h[u]||c[u]||o;return n?a.createElement(d,r(r({ref:t},p),{},{components:n})):a.createElement(d,r({ref:t},p))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,r[1]=s;for(var m=2;m<o;m++)r[m]=n[m];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},4555:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return u},frontMatter:function(){return s},metadata:function(){return m},toc:function(){return c}});var a=n(6738),i=n(8832),o=(n(9703),n(8840)),r=["components"],s={sidebar_position:2},l="Contributing",m={unversionedId:"developing/contributing",id:"developing/contributing",title:"Contributing",description:"General",source:"@site/docs/developing/contributing.md",sourceDirName:"developing",slug:"/developing/contributing",permalink:"prytaneum/docs/developing/contributing",draft:!1,editUrl:"https://github.com/c2c-project/prytaneum/tree/dev/app/docs/docs/developing/contributing.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Developing",permalink:"prytaneum/docs/category/developing"},next:{title:"Architecture",permalink:"prytaneum/docs/developing/architecture"}},p={},c=[{value:"General",id:"general",level:2},{value:"Commits",id:"commits",level:3},{value:"Before Requesting a Review",id:"before-requesting-a-review",level:3},{value:"Step 1: Create Upstream Remote",id:"step-1-create-upstream-remote",level:2},{value:"Step 2: Rebase Onto Upstream",id:"step-2-rebase-onto-upstream",level:2},{value:"Step 2a: Which Commits to Keep",id:"step-2a-which-commits-to-keep",level:3},{value:"Step 2b: Resolving Conflicts",id:"step-2b-resolving-conflicts",level:3},{value:"Step 3: Updating the PR",id:"step-3-updating-the-pr",level:2},{value:"FAQ / Help",id:"faq--help",level:2},{value:"What is rebasing?",id:"what-is-rebasing",level:3},{value:"Why rebase instead of merge?",id:"why-rebase-instead-of-merge",level:3},{value:"Is there something wrong with merging?",id:"is-there-something-wrong-with-merging",level:3},{value:"I have a merge commit, is that bad?",id:"i-have-a-merge-commit-is-that-bad",level:3},{value:"I think something is wrong in this guide.",id:"i-think-something-is-wrong-in-this-guide",level:3}],h={toc:c};function u(e){var t=e.components,n=(0,i.Z)(e,r);return(0,o.kt)("wrapper",(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"contributing"},"Contributing"),(0,o.kt)("h2",{id:"general"},"General"),(0,o.kt)("p",null,"In general, to work on prytaneum, these are the steps to follow:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Fork the project."),(0,o.kt)("li",{parentName:"ol"},"Make and commit your changes."),(0,o.kt)("li",{parentName:"ol"},"Open PR into the ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"dev"))," branch.")),(0,o.kt)("h3",{id:"commits"},"Commits"),(0,o.kt)("p",null,"Commits need to follow a specific format, which makes for a nicer commit history and eases the burden on the reviewer. Read more at the ",(0,o.kt)("a",{parentName:"p",href:"https://www.conventionalcommits.org/en/v1.0.0/"},"commitlint")," docs and by inspecting the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/c2c-project/prytaneum/blob/dev/commitlint.config.js"},(0,o.kt)("inlineCode",{parentName:"a"},"commitlint.config.js")),"."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Interactive Prompt")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Ensure your commit is always properly formatted by using the interactive prompt via ",(0,o.kt)("inlineCode",{parentName:"p"},"yarn g:commit"),"."))),(0,o.kt)("h3",{id:"before-requesting-a-review"},"Before Requesting a Review"),(0,o.kt)("p",null,"In an effort to keep PR's clean, we use rebase/squash git workflow."),(0,o.kt)("p",null,"Please read up on ",(0,o.kt)("a",{parentName:"p",href:"https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase"},"what rebasing is if you are unfamiliar"),". The tl;dr is that rather than merging two linked lists, ",(0,o.kt)("inlineCode",{parentName:"p"},"git merge"),", and creating a new merge commit, we're cutting and pasting, ",(0,o.kt)("inlineCode",{parentName:"p"},"git rebase"),", from one branch onto another. The rest of the guide will assume a basic understanding of ",(0,o.kt)("inlineCode",{parentName:"p"},"git rebase"),"."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Gitlens")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Install ",(0,o.kt)("a",{parentName:"p",href:"https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens"},"GitLens")," in Visual Studio Code and run ",(0,o.kt)("inlineCode",{parentName:"p"},'git config --global core.editor "code --wait"'),". This will allow you to use vscode interactively when rebasing. Otherwise, it will use Vim by default, which you are also welcome to keep."),(0,o.kt)("p",{parentName:"div"},"You may also need to add the ",(0,o.kt)("inlineCode",{parentName:"p"},"code")," command into your PATH if you are on ",(0,o.kt)("a",{parentName:"p",href:"https://code.visualstudio.com/docs/setup/mac#_launching-from-the-command-line"},"macOS.")))),(0,o.kt)("h2",{id:"step-1-create-upstream-remote"},"Step 1: Create Upstream Remote"),(0,o.kt)("p",null,"Please run the following commands"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"git remote add upstream git@github.com:c2c-project/prytaneum.git # You may need to setup ssh keys\ngit fetch upstream # Update local refs\n")),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"You may use a name other than ",(0,o.kt)("inlineCode",{parentName:"p"},"upstream"),". However, ",(0,o.kt)("inlineCode",{parentName:"p"},"upstream")," will be assumed throughout this guide."))),(0,o.kt)("h2",{id:"step-2-rebase-onto-upstream"},"Step 2: Rebase Onto Upstream"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"git rebase upstream/dev -i # Rebase onto upstream/dev branch interactively\n")),(0,o.kt)("p",null,"If you had no merge conflicts, then skip to step 3."),(0,o.kt)("h3",{id:"step-2a-which-commits-to-keep"},"Step 2a: Which Commits to Keep"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"drop")," ",(0,o.kt)("strong",{parentName:"p"},"any")," commit that satisfies the following:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"It is not a commit you wrote."),(0,o.kt)("li",{parentName:"ol"},"It was part of another PR that has already been merged.")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"pick")," ",(0,o.kt)("strong",{parentName:"p"},"any")," commit that satisfies the following:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"It is a commit that you intend to include in a future PR.")),(0,o.kt)("h3",{id:"step-2b-resolving-conflicts"},"Step 2b: Resolving Conflicts"),(0,o.kt)("p",null,'During an interactive rebase, if you have 10 commits, and there\'s a merge conflict in the first commit, you will only see your work up to the first commit. If you made changes to the same file in later commits and do not see your work, do not panic! Rebasing will iteratively "replay" each ',(0,o.kt)("inlineCode",{parentName:"p"},"pick"),'ed onto the HEAD dev branch as if you wrote them starting at the HEAD commit of dev and it will "pause" at commits with merge conflicts so that you can resolve them.'),(0,o.kt)("p",null,"Once you have resolved all conflicts, make sure to run"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"git add . # assuming your are in the root of the project\ngit rebase --continue # replay commits until we hit the next merge conflict\n")),(0,o.kt)("h2",{id:"step-3-updating-the-pr"},"Step 3: Updating the PR"),(0,o.kt)("p",null,"When you rebase a branch, you're rewriting history, which means that there are new commit hashes. In order to push to Github, you'll have to force push."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"git push origin your_branch_here --force # or use -f\n")),(0,o.kt)("h2",{id:"faq--help"},"FAQ / Help"),(0,o.kt)("h3",{id:"what-is-rebasing"},"What is rebasing?"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase"},"This will probably answer most of your questions")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=f1wnYdLEpgI&list=PLZbjkP1oQ5zZG-7auCO54cNuHQ0_GBC7k&index=3"},"Here is a useful video that can also be referenced."))),(0,o.kt)("h3",{id:"why-rebase-instead-of-merge"},"Why rebase instead of merge?"),(0,o.kt)("p",null,"Honestly, it's just preference. Rebasing in interactive mode forces you to make sure your changes are merged correctly commit-by-commit instead of all at one time in a git merge (the default strategy in a git pull)."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"You can change the default behavior of ",(0,o.kt)("inlineCode",{parentName:"p"},"git pull")," to rebase: ",(0,o.kt)("inlineCode",{parentName:"p"},"git config --global pull.rebase true"),". If you don't want to change it for all of your projects with git, just remove the ",(0,o.kt)("inlineCode",{parentName:"p"},"--global")," flag."))),(0,o.kt)("p",null,"If you're interested to hear more of an explanation, ask in slack."),(0,o.kt)("h3",{id:"is-there-something-wrong-with-merging"},"Is there something wrong with merging?"),(0,o.kt)("p",null,"Nope. This is all just preference. There is a tradeoff with rebasing: rebasing changes history (the commit hashes). When you're rebasing, any changes you make or conflicts you resolve is actively changing the history. What this means is that commits you already have on the remote repo will have a different commit hash after rebasing, which means you'll hav eto force push. If you're rebasing a public branch, this can be problematic. If you're the only one editing said branch, then it's not really an issue to ",(0,o.kt)("inlineCode",{parentName:"p"},"git push --force"),', however, this should always be done with caution. If you google "git rebase vs merge" you\'ll find lots of passionate discussion \ud83d\ude04'),(0,o.kt)("h3",{id:"i-have-a-merge-commit-is-that-bad"},"I have a merge commit, is that bad?"),(0,o.kt)("p",null,"Not at all. We'll still merge the PR, just make sure the diff isn't something outrageous (1k+ files)."),(0,o.kt)("p",null,"Optionally, you can rebase and ",(0,o.kt)("inlineCode",{parentName:"p"},"drop")," the merge commit."),(0,o.kt)("h3",{id:"i-think-something-is-wrong-in-this-guide"},"I think something is wrong in this guide."),(0,o.kt)("p",null,"That's certainly possible! Open a PR or send a message with what you believe is wrong/the fix."))}u.isMDXComponent=!0}}]);